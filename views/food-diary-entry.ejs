<script>
  $(document).ready(function () {
    //Za odstranjevanje vrstic
    $('#remove').click(function () {
      if ($('div.entry').length != 1) {
        $('div.entry')
          .last()
          .remove()
      }
    })
    //Za dodajanje vrstic
    $('#add').click(function () {
      var $div = `
        <div class="entry">
          <label for="food">Choose food: </label>
          <select class="operator" name="names" required>
            <% foods.forEach(food => { %>
            <option value="<%= food._id %>">
              <%= food.name %> <%= food.quantity %> <%= food.quantity_type %>
            </option>
            <% }) %>
          </select>
          <label for="quantity">Quantity: </label>
          <input type="number" min="0" value="1" name="quantities" />
        </div>
        `
      //Dodam za zadnjim entryjem
      $('div.entry')
        .last()
        .after($div)
      //Applyam Select2
      $('div.entry select')
        .last()
        .val([])
      $('div.entry select')
        .last()
        .select2({
          placeholder: 'Select food'
        })
    })
  })

function goBack() {
  window.history.back();
}

</script>

<a onclick="goBack()" class="previous">‚Üê Back</a>
<div class="food-diary">
  <h1>Add today's diary entry</h1>
  <%- include ('./partials/messages') %>
  <button class="btn btn-success btn-block" id="add">+</button>
  <button class="btn btn-danger btn-block" id="remove">-</button>
  <form action="/food-diary/add" method="POST">
    <label for="type">Type of entry:</label>
    <select name="type">
      <option value="breakfast">Breakfast</option>
      <option value="lunch">Lunch</option>
      <option value="dinner">Dinner</option>
      <option value="meal">Meal</option>
    </select>
    <p></p>
    <div class="entry"></div>
    <div>
      <button type="submit" class="btn btn-primary btn-block">Submit</button>
    </div>
  </form>
</div>
